let debug=!0;const questions=[["¿Con que elemento te identificas más?","Agua","Tierra","Fuego","Aire","Water, liquid effect, bubbles","rocks, mountains, land","red color, hot, sun, dangerous, energy, strength, clarity","particles, hurricane, wind, force"],["¿Que ciudad te gustaría explorar?","Futurista","Cyberpunk","Tecnologico","Videogamer","Innovative, Chaotic, sustainable, friendly to the environment, technology","post apocalyptic world, dystopian universe, highly technological society, dark and violent","technological, innovative, futuristic, modern technology","neon lights, video games, black abyss, postcyberpunk, TRON Legacy, neon world"],["¿Con que figura geométrica te identificas?","Cuadrado","Circulo","Triangulo","Rombo","box, cubo, neon, geometry, texture, Cuboid","sphere, circle, round, no corners, ball, illuminated","Triangle, pyramid, corners, linear, star, point","rhombus, diamond, poker card, geometry, luck"],["¿Que tipo de super poder te gustaría tener?","Volar","Fuerza","Velocidad","Inteligencia","birds, wind, wings, sky, height, fly","strength, rude, strong, powerful, skill, power","speed, swift, fast, flash, lightning","Intelligent, skillful, technology, mind, knowledge"]];function getPrompt(){return findAnswer(0)+", "+findAnswer(1)+", "+findAnswer(2)+", "+findAnswer(3)}var UIRegistro=document.getElementById("Registro"),UIMayorEdad=document.getElementById("SoyMayorDeEdad"),UIQuiz=document.getElementById("Quiz"),UILoadBot=document.getElementById("CreandoBotella"),UIChooseImagen=document.getElementById("ChooseImagen"),UIImagenFinal=document.getElementById("ImagenFinal");function checkForm(){return document.getElementById("formNombre").value.length>0&&document.getElementById("formCorreo").value.length>0&&document.getElementById("formTelefono").value.length>0}UIMayorEdad.style.display="block",UIRegistro.style.display="none",UIQuiz.style.display="none",UILoadBot.style.display="none",UIChooseImagen.style.display="none",selectedImg="",document.getElementById("regBtn").addEventListener("click",()=>{checkForm()?(document.getElementById("nameken").innerHTML=document.getElementById("formNombre").value+"ken",UIRegistro.style.display="none",nextQuestion(),UIQuiz.style.display="block"):window.alert("No se llenaron todos los datos de forma correcta")}),document.getElementById("mayorBtn").addEventListener("click",()=>{document.getElementById("mayorCheck").checked&&(UIMayorEdad.style.display="none",UIRegistro.style.display="block")}),QuizQuestion=document.getElementById("pregunta"),QuizBtns=new Array,QuizBtns.push(document.getElementById("btn1")),QuizBtns.push(document.getElementById("btn2")),QuizBtns.push(document.getElementById("btn3")),QuizBtns.push(document.getElementById("btn4"));let _bk="aaf^abZcZa^e";var currentQst=0,respuestas=new Array;function nextQuestion(){preguntaImgElem.src="./assets/img/3-Preguntas/pregunta_"+(currentQst+1)+".png",QuizQuestion.innerHTML=questions[currentQst][0];for(let e=0;e<QuizBtns.length;e++)QuizBtns[e].innerHTML=questions[currentQst][e+1]}let preguntaImgElem=document.getElementById("preguntaImg");preguntaImgElem.src="./assets/img/3-Preguntas/pregunta_1.png";for(var cnt=0;cnt<QuizBtns.length;cnt++)QuizBtns[cnt].addEventListener("click",e=>{respuestas.push(e.target.innerHTML),++currentQst<questions.length?nextQuestion():(UIQuiz.style.display="none",cargarPrompt(),UILoadBot.style.display="block")});function d(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e.charCodeAt(n)-45);return t}function findAnswer(e){return questions[e][questions[e].findIndex(t=>t==respuestas[e])+4]}async function cargarPrompt(){var e=getPrompt();let t=parseInt(Date.now())%9999999999;const n={method:"POST",headers:{accept:"application/json","content-type":"application/json",authorization:"Bearer "+d(_bk)+d(_kb)},body:JSON.stringify({prompt:e,negativePrompt:"people, human, asymmetric, watermarks, out of frame, lowres, text, error, cropped, worst quality, low quality, jpeg artifacts, ugly, duplicate, morbid, mutilated, out of frame, extra fingers, mutated hands, poorly drawn hands, poorly drawn face, mutation, deformed, blurry, dehydrated, bad anatomy, bad proportions, extra limbs, cloned face, disfigured, gross proportions, malformed limbs, missing arms, missing legs, extra arms, extra legs, fused fingers, too many fingers, long neck, username, watermark, signature",steps:30,width:512,height:1024,numberOfImages:4,promptStrength:7,seed:t,enhancePrompt:!0,upscaleBy:"x1",sampler:"ddim"})};var o="aa";await fetch("https://api.tryleap.ai/api/v1/images/models/8b1b897c-d66d-45a6-b8d7-8e32421d02cf\t/inferences",n).then(e=>e.json()).then(e=>{o=e.id}).catch(e=>console.error(e)),debug&&console.log("Prompt = "+e+"\nSeed = "+t);let a="",r=new Array,s=document.getElementById("yaCasiEsta");const i=["Cargando, por favor espera","En unos segundos estará listo","Preparándose para la gran revelación","La espera valdrá la pena","Pronto lo tendrás en tus manos","Un poco mas, estamos en ello","En un abrir y cerrar de ojos quedara","Ya casi terminamos, gracias por esperar"];s.innerHTML=i[0];let l=0,g=0;do{if(l<=0){let e=0;do{e=Math.floor(Math.random()*i.length)}while(g==e);s.innerHTML=i[e],g=e,l=5}debug&&console.log("not yet");const e={method:"GET",headers:{accept:"application/json",authorization:"Bearer "+d(_bk)+d(_kb)}};await fetch("https://api.tryleap.ai/api/v1/images/models/1e7737d7-545e-469f-857f-e4b46eaa151d/inferences/"+o,e).then(e=>e.json()).then(e=>{a=e.state;for(let t=0;t<e.images.length;t++)r.push(e.images[t].uri)}).catch(e=>console.error(e)),await new Promise(e=>setTimeout(e,10)),l--}while("finished"!=a);debug&&console.log("Finished!");let m=0;r.forEach(e=>{debug&&console.log("Creating img "+m);let t=document.createElement("div");t.style="background-image:url("+e+");"+(1==m?"margin-left:16%;":" "),t.addEventListener("click",t=>{if(debug&&console.log("Clicked! //   "+selectedImg+"  //  "+t.target.style.backgroundImage),t.target.style.backgroundImage!=selectedImg){let n=t.target.style.backgroundImage;t.target.style.backgroundImage=selectedImg,selectedImg=n,document.getElementById("mainImg").style.backgroundImage=selectedImg,debug&&console.log(e)}}),0==m&&(t.id="mainImg",selectedImg=t.style.backgroundImage),t.className=0==m?"mainImg":"subImg",UIChooseImagen.append(t),m++});let c=document.createElement("div");c.className="continueBoton",c.style="margin-top: 38vw; margin-right: 0; margin-left: 37%;",c.innerHTML="Continuar",c.addEventListener("click",()=>{UIChooseImagen.style.display="none",document.getElementById("imagenDetras").style.backgroundImage=selectedImg,UIImagenFinal.style.display="block"}),UIChooseImagen.append(c),UILoadBot.style.display="none",UIChooseImagen.style.display="block"}let _kb="ZeecZdfdb";for(let e=0;e<3;e++){let t=document.createElement("div");t.className="botonQuiz",t.style.width="20%",0==e?(t.style.marginLeft="15%",t.innerHTML="Regresar",t.addEventListener("click",()=>{UIImagenFinal.style.display="none",UIChooseImagen.style.display="block"})):(t.style.marginLeft="5%",t.innerHTML=1==e?"Descargar":"Comprar"),UIImagenFinal.append(t)}